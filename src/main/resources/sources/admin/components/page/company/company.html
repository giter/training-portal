<div class="page-user">
    <div class="panel admin-panel">
        <div class="panel-head">
            <strong>
                用户列表
            </strong>
        </div>
        <div class="padding border-bottom">
            <div class="form-inline">
                <div class="form-group">
                    <div class="label">
                        用户类型：
                    </div>
                    <div class="field">
                        <select class="input" v-model="user.booktype">
                            <option value="0" >长期用户</option>
                            <option value="1">短期用户</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <div class="label">
                        合作单位：
                    </div>
                    <div class="field">
                        <select class="input" v-model="selected" options="companies">
                            <option value="0">
                                请选择条件筛选
                            </option>
                        </select>
                    </div>
                </div>
            </div>


            <input type="button" class="button button-small bg-main "  data-target="#user-dialog" style="float: right" data-mask="1" data-width="50%"  v-on="click:addUser" value="新增用户" />
        </div>
        <table class="table table-hover">
            <tr><th width="150">用户名</th>
                <th width="*" v-show="user.booktype==0">邮箱</th>
                <th width="200">合作单位</th>
                <th width="200">手机号码</th>
                <th width="100">用户类型</th>
                <th width="120" v-show="user.booktype==1">到期时间</th>
                <th width="120">状态</th>
                <th width="100">操作</th></tr>
            <tr v-repeat="c in users">
                <td>{{c.name}}</td>
                <td v-show="user.booktype==0">{{c.email}}</td>
                <td>{{c.company}}</td>
                <td>{{c.mobile}}</td>
                <td>{{c.booktype==1?"短期用户":"长期用户"}}</td>
                <td v-show="user.booktype==1">{{c.effective}}</td>
                <td><span class="badge bg-green">审核通过</span></td>
                <td><a v-on="click:editUser(c)" class="button border-blue button-little" href="javascript:;">修改</a> <a class="button border-yellow button-little" v-on="click:delUser(c._id)" href="javascript:;">删除</a> </td></tr>
        </table>

        <c-pager count="{{@ count}}" limit="{{@ limit}}" page="{{@ page}}"></c-pager>

        <div class="dialog-mask" style="display: none;"></div>

        <div id="company-dialog" class="dialog-win" style="position: fixed; width: 50%; z-index: 11;display: none;">
            <div class="dialog open">
                <div class="dialog-head">
                    <span class="close" v-on="click:closeDialog"></span>
                    <strong>{{user._type}}</strong>
                </div>
                <div class="dialog-body" v-show="user.booktype==0">
                    <div class="form-x">
                        <div class="form-group">
                            <div class="label">
                                用户名
                            </div>
                            <div class="field">
                                <input type="text" class="input" v-model="user.name" placeholder="请填写用户名">
                                <div v-show="!validation.name" class="input-help  check-error"><ul><li>必填</li></ul></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="label">
                                合作单位
                            </div>
                            <div class="field">
                                <input type="text" class="input" v-model="user.company" placeholder="请填写合作单位名称">
                                <div v-show="!validation.company" class="input-help  check-error"><ul><li>必填</li></ul></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="label">
                                邮箱
                            </div>
                            <div class="field">
                                <input type="text" class="input" v-model="user.email" placeholder="请填写邮箱">
                                <div v-show="!validation.email" class="input-help  check-error"><ul><li>请填写正确邮箱格式</li></ul></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="label">
                                手机号
                            </div>
                            <div class="field">
                                <input type="text" class="input" v-model="user.mobile" placeholder="请填写手机号">
                                <div v-show="!validation.mobile" class="input-help  check-error"><ul><li>请填写正确手机号码</li></ul></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="dialog-body" v-show="user.booktype==1">
                    <div class="form-x">
                        <div class="form-group">
                            <div class="label">
                                用户名
                            </div>
                            <div class="field">
                                <input type="text" class="input" v-model="user.name" placeholder="请填写用户名">
                                <div v-show="!validation2.name" class="input-help  check-error"><ul><li>必填</li></ul></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="label">
                                合作单位
                            </div>
                            <div class="field">
                                <input type="text" class="input" v-model="user.company" placeholder="请填写合作单位名称">
                                <div v-show="!validation2.company" class="input-help  check-error"><ul><li>必填</li></ul></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="label">
                                手机号
                            </div>
                            <div class="field">
                                <input type="text" class="input" v-model="user.mobile" placeholder="请填写手机号">
                                <div v-show="!validation2.mobile" class="input-help  check-error"><ul><li>请填写正确手机号码</li></ul></div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="label">
                                到期时间
                            </div>
                            <div class="field">
                                <input type="text" class="input" id="effective" v-model="user.effective" placeholder="请填写到期时间">
                                <div v-show="!validation2.effective" class="input-help  check-error"><ul><li>必填</li></ul></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="dialog-foot">
                    <button class="button dialog-close" v-on="click:closeDialog">取消</button>
                    <button class="button bg-green" v-disabled="isValid" v-on="click:postUser" >确认</button>
                </div>
            </div>
        </div>

    </div>

</div>